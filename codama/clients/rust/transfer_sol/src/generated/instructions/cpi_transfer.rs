//! This code was AUTOGENERATED by `pina_codama_renderer`.
//! Please DO NOT EDIT THIS FILE directly.
//! Regenerate it from Codama IDLs instead.

pub const CPI_TRANSFER_DISCRIMINATOR: u8 = 0u8;

/// Accounts.
#[derive(Clone, Debug)]
pub struct CpiTransfer {
	/// The sender. Must be a signer and writable (lamports will be debited).
	pub sender: solana_pubkey::Pubkey,
	/// The recipient. Must be writable (lamports will be credited).
	pub recipient: solana_pubkey::Pubkey,
	/// The system program.
	pub system_program: solana_pubkey::Pubkey,
}

impl CpiTransfer {
	pub fn new(sender: solana_pubkey::Pubkey, recipient: solana_pubkey::Pubkey) -> Self {
		Self {
			sender,
			recipient,
			system_program: solana_pubkey::pubkey!("11111111111111111111111111111111"),
		}
	}

	pub fn instruction(&self, data: CpiTransferInstructionData) -> solana_instruction::Instruction {
		self.instruction_with_remaining_accounts(data, &[])
	}

	#[allow(clippy::arithmetic_side_effects)]
	pub fn instruction_with_remaining_accounts(
		&self,
		data: CpiTransferInstructionData,
		remaining_accounts: &[solana_instruction::AccountMeta],
	) -> solana_instruction::Instruction {
		let mut accounts = Vec::with_capacity(3 + remaining_accounts.len());
		accounts.push(solana_instruction::AccountMeta::new(self.sender, true));
		accounts.push(solana_instruction::AccountMeta::new(self.recipient, false));
		accounts.push(solana_instruction::AccountMeta::new_readonly(self.system_program, false));
		accounts.extend_from_slice(remaining_accounts);
		let data = bytemuck::bytes_of(&data).to_vec();

		solana_instruction::Instruction {
			program_id: crate::TRANSFER_SOL_ID,
			accounts,
			data,
		}
	}
}

#[repr(C)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, bytemuck::Pod, bytemuck::Zeroable)]
pub struct CpiTransferInstructionData {
	pub discriminator: u8,
	pub amount: crate::generated::shared::PodU64,
}

impl CpiTransferInstructionData {
	pub const fn new(amount: crate::generated::shared::PodU64) -> Self {
		Self {
			discriminator: CPI_TRANSFER_DISCRIMINATOR,
			amount,
		}
	}
}

/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import { assertIsInstructionWithAccounts, containsBytes, getU8Encoder, SOLANA_ERROR__PROGRAM_CLIENTS__FAILED_TO_IDENTIFY_INSTRUCTION, SOLANA_ERROR__PROGRAM_CLIENTS__UNRECOGNIZED_INSTRUCTION_TYPE, SolanaError, type Address, type ClientWithTransactionPlanning, type ClientWithTransactionSending, type Instruction, type InstructionWithData, type ReadonlyUint8Array } from '@solana/kit';
import { addSelfPlanAndSendFunctions, type SelfPlanAndSendFunctions } from '@solana/program-client-core';
import { getRealloc2Instruction, getReallocInstruction, parseRealloc2Instruction, parseReallocInstruction, type ParsedRealloc2Instruction, type ParsedReallocInstruction, type Realloc2Input, type ReallocInput } from '../instructions';

export const ANCHOR_REALLOC_PROGRAM_ADDRESS = 'Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS' as Address<'Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS'>;

export enum AnchorReallocInstruction { Realloc, Realloc2 }

export function identifyAnchorReallocInstruction(instruction: { data: ReadonlyUint8Array } | ReadonlyUint8Array): AnchorReallocInstruction {
    const data = 'data' in instruction ? instruction.data : instruction;
    if (containsBytes(data, getU8Encoder().encode(0), 0)) { return AnchorReallocInstruction.Realloc; }
if (containsBytes(data, getU8Encoder().encode(1), 0)) { return AnchorReallocInstruction.Realloc2; }
    throw new SolanaError(SOLANA_ERROR__PROGRAM_CLIENTS__FAILED_TO_IDENTIFY_INSTRUCTION, { instructionData: data, programName: "anchorRealloc" });
}

export type ParsedAnchorReallocInstruction<TProgram extends string = 'Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS'> =
| { instructionType: AnchorReallocInstruction.Realloc } & ParsedReallocInstruction<TProgram>
| { instructionType: AnchorReallocInstruction.Realloc2 } & ParsedRealloc2Instruction<TProgram>


        export function parseAnchorReallocInstruction<TProgram extends string>(
            instruction: Instruction<TProgram> 
                & InstructionWithData<ReadonlyUint8Array>
        ): ParsedAnchorReallocInstruction<TProgram> {
            const instructionType = identifyAnchorReallocInstruction(instruction);
            switch (instructionType) {
                case AnchorReallocInstruction.Realloc: { assertIsInstructionWithAccounts(instruction);
return { instructionType: AnchorReallocInstruction.Realloc, ...parseReallocInstruction(instruction) }; }
case AnchorReallocInstruction.Realloc2: { assertIsInstructionWithAccounts(instruction);
return { instructionType: AnchorReallocInstruction.Realloc2, ...parseRealloc2Instruction(instruction) }; }
                default: throw new SolanaError(SOLANA_ERROR__PROGRAM_CLIENTS__UNRECOGNIZED_INSTRUCTION_TYPE, { instructionType: instructionType as string, programName: "anchorRealloc" });
            }
        }

export type AnchorReallocPlugin = { instructions: AnchorReallocPluginInstructions; }

export type AnchorReallocPluginInstructions = { realloc: (input: ReallocInput) => ReturnType<typeof getReallocInstruction> & SelfPlanAndSendFunctions; realloc2: (input: Realloc2Input) => ReturnType<typeof getRealloc2Instruction> & SelfPlanAndSendFunctions; }

export type AnchorReallocPluginRequirements = ClientWithTransactionPlanning & ClientWithTransactionSending

export function anchorReallocProgram() {
    return <T extends AnchorReallocPluginRequirements>(client: T) => {
        return { ...client, anchorRealloc: <AnchorReallocPlugin>{ instructions: { realloc: input => addSelfPlanAndSendFunctions(client, getReallocInstruction(input)), realloc2: input => addSelfPlanAndSendFunctions(client, getRealloc2Instruction(input)) } } };
    };
}